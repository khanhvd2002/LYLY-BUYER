function i(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}function a(){return!0}function r(t,e,o){if(!t||d(t,o)===!1)return!1;const n=i(e);if(typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&n.host===t.target)return!1;const u=(typeof o.value=="object"&&o.value.include||(()=>[]))();return u.push(e),!u.some(c=>c==null?void 0:c.contains(t.target))}function d(t,e){return(typeof e.value=="object"&&e.value.closeConditional||a)(t)}function f(t,e,o){const n=typeof o.value=="function"?o.value:o.value.handler;e._clickOutside.lastMousedownWasOutside&&r(t,e,o)&&setTimeout(()=>{d(t,o)&&n&&n(t)},0)}function s(t,e){const o=i(t);e(document),typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&e(o)}const l={mounted(t,e){const o=u=>f(u,t,e),n=u=>{t._clickOutside.lastMousedownWasOutside=r(u,t,e)};s(t,u=>{u.addEventListener("click",o,!0),u.addEventListener("mousedown",n,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!0}),t._clickOutside[e.instance.$.uid]={onClick:o,onMousedown:n}},unmounted(t,e){t._clickOutside&&(s(t,o=>{var c;if(!o||!((c=t._clickOutside)!=null&&c[e.instance.$.uid]))return;const{onClick:n,onMousedown:u}=t._clickOutside[e.instance.$.uid];o.removeEventListener("click",n,!0),o.removeEventListener("mousedown",u,!0)}),delete t._clickOutside[e.instance.$.uid])}};export{l as C};
